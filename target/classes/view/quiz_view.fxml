<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.Font?>
<?import javafx.collections.FXCollections?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.app.controller.QuizController">
    <top>
        <VBox alignment="CENTER" spacing="10" style="-fx-padding: 15; -fx-background-color: #fce4ec;">
            <!-- Progress and Timer -->
            <Label fx:id="progressLabel" text="Question 1/20" style="-fx-font-size: 14px; -fx-text-fill: #555;"/>
            <Label fx:id="timerLabel" text="Temps : 00:30" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #e91e63;"/>
            <Button text="Retour" onAction="#handleBack" style="-fx-background-color: #757575; -fx-text-fill: white; -fx-font-size: 12px;"/>
        </VBox>
    </top>
    <center>
        <StackPane fx:id="contentArea">
             <!-- Question View -->
             <!-- Question View -->
             <VBox fx:id="questionView" spacing="20" style="-fx-alignment: center;">
                 <VBox style="-fx-background-color: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5); -fx-background-radius: 10; -fx-padding: 30; -fx-max-width: 700;">
                      <Label fx:id="questionTextLabel" wrapText="true" textAlignment="CENTER" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #333; -fx-padding: 0 0 20 0;"/>
                      <VBox fx:id="answersContainer" spacing="12" style="-fx-alignment: center-left;"/>
                 </VBox>
                 <Label fx:id="feedbackLabel" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
             </VBox>
             
             <!-- Results View (initially hidden) -->
             <VBox fx:id="resultsView" visible="false" spacing="15" alignment="CENTER" style="-fx-padding: 20;">
                <Label fx:id="resultLabel" />
                <Label fx:id="pointsLabel" />
                <VBox fx:id="badgesContainer" alignment="CENTER" spacing="5" style="-fx-padding: 10;" />
                
                <VBox fx:id="multiplayerResultsBox" managed="false" visible="false" alignment="CENTER" spacing="10" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 10;">
                   <Label text="STANDINGS MULTIJOUEUR" style="-fx-font-weight: bold; -fx-text-fill: #1976d2;"/>
                   <Label fx:id="winStatusLabel" text="Calculating..." style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
                   <VBox fx:id="multiplayerLeaderboard" spacing="5" />
                </VBox>

                <Button text="Revoir les Réponses" onAction="#showReview" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"/>
                <Button text="Réessayer" onAction="#retryQuiz" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-weight: bold;"/>
            </VBox>
        </StackPane>
    </center>
    <bottom>
        <VBox alignment="CENTER" spacing="15" style="-fx-padding: 20;">
            <Button fx:id="nextButton" text="Question Suivante" onAction="#handleNext" style="-fx-background-color: #e91e63; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 30; -fx-font-size: 14px;"/>
        </VBox>
    </bottom>
</BorderPane>
