<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="25" style="-fx-background-color: #f5f7fa; -fx-padding: 35;" 
      xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.app.controller.AdminStatisticsController">
    
    <!-- Title -->
    <VBox spacing="5">
        <Label text="ðŸ“Š Statistiques Globales" style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
        <Label text="AperÃ§u de l'activitÃ© de la plateforme" style="-fx-font-size: 16px; -fx-text-fill: #7f8c8d;"/>
    </VBox>

    <Separator/>

    <!-- Main Metrics Grid -->
    <GridPane hgap="25" vgap="25">
        <columnConstraints>
            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="100.0" />
        </columnConstraints>
        
        <!-- Total Users Card -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 4);" GridPane.columnIndex="0" GridPane.rowIndex="0">
            <Label text="ðŸ‘¤ Utilisateurs" style="-fx-text-fill: #95a5a6; -fx-font-weight: bold;"/>
            <Label fx:id="totalUsersLabel" text="..." style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
            <Label text="Inscriptions totales" style="-fx-font-size: 12px; -fx-text-fill: #bdc3c7;"/>
        </VBox>

        <!-- Total Quizzes Card -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 4);" GridPane.columnIndex="1" GridPane.rowIndex="0">
            <Label text="ðŸ“ Quiz JouÃ©s" style="-fx-text-fill: #95a5a6; -fx-font-weight: bold;"/>
            <Label fx:id="totalQuizzesLabel" text="..." style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #9b59b6;"/>
            <Label text="Sessions terminÃ©es" style="-fx-font-size: 12px; -fx-text-fill: #bdc3c7;"/>
        </VBox>

        <!-- Avg Score Card -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 4);" GridPane.columnIndex="2" GridPane.rowIndex="0">
            <Label text="ðŸŽ¯ Score Moyen" style="-fx-text-fill: #95a5a6; -fx-font-weight: bold;"/>
            <Label fx:id="avgScoreLabel" text="...%" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #e67e22;"/>
            <Label text="Performance globale" style="-fx-font-size: 12px; -fx-text-fill: #bdc3c7;"/>
        </VBox>

        <!-- Rooms Card -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 4);" GridPane.columnIndex="0" GridPane.rowIndex="1">
            <Label text="ðŸŽ® Salles de Combat" style="-fx-text-fill: #95a5a6; -fx-font-weight: bold;"/>
            <Label fx:id="totalRoomsLabel" text="..." style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
            <Label text="Multijoueur crÃ©Ã©" style="-fx-font-size: 12px; -fx-text-fill: #bdc3c7;"/>
        </VBox>

        <!-- Popular Lang Card -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 4);" GridPane.columnIndex="1" GridPane.rowIndex="1">
            <Label text="ðŸ’Ž Langage PrÃ©fÃ©rÃ©" style="-fx-text-fill: #95a5a6; -fx-font-weight: bold;"/>
            <Label fx:id="popularLangLabel" text="..." style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
            <Label text="Le plus pratiquÃ©" style="-fx-font-size: 12px; -fx-text-fill: #bdc3c7;"/>
        </VBox>

        <!-- Questions Card -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.05), 10, 0, 0, 4);" GridPane.columnIndex="2" GridPane.rowIndex="1">
            <Label text="ðŸ“‚ Banque de Questions" style="-fx-text-fill: #95a5a6; -fx-font-weight: bold;"/>
            <Label fx:id="totalQuestionsLabel" text="..." style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
            <Label text="Questions actives" style="-fx-font-size: 12px; -fx-text-fill: #bdc3c7;"/>
        </VBox>
    </GridPane>

    <Region VBox.vgrow="ALWAYS"/>

    <!-- Refresh Button -->
    <HBox alignment="CENTER_RIGHT">
        <Button text="ðŸ”„ Actualiser les donnÃ©es" onAction="#refreshStats" 
                style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-padding: 12 25; -fx-font-weight: bold; -fx-background-radius: 8; -fx-cursor: hand;"/>
    </HBox>

</VBox>
